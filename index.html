<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KYC Shop - Верифицированные Аккаунты</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: #333;
      line-height: 1.6;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 1rem 2rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .site-logo {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .site-logo:hover {
      transform: scale(1.1);
    }

    .site-logo i {
      font-size: 24px;
      color: #667eea;
    }

    .site-title {
      font-size: 1.8rem;
      color: white;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .search-container {
      position: relative;
      flex: 1;
      max-width: 400px;
      margin: 0 2rem;
    }

    .search-input {
      width: 100%;
      padding: 12px 50px 12px 20px;
      border: none;
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 16px;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .search-input:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.3);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }

    .search-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
    }

    .header-icons {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }

    .header-icon {
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      position: relative;
    }

    .header-icon:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4757;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .filter-bar {
      background: white;
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .filter-controls {
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .filter-group label {
      font-weight: 600;
      color: #555;
    }

    .filter-select, .sort-select {
      padding: 8px 15px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      background: white;
      color: #333;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .filter-select:focus, .sort-select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .stats {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-left: auto;
      color: #666;
      font-size: 14px;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      padding: 1rem 0;
    }

    .product-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }

    .product-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    }

    .favorite-btn {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .favorite-btn:hover {
      background: white;
      transform: scale(1.1);
    }

    .favorite-btn.active {
      background: #ff4757;
      color: white;
    }

    .product-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .product-card:hover::before {
      opacity: 1;
    }

    .product-top {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .product-top::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%, 100% { transform: rotate(0deg); }
      50% { transform: rotate(180deg); }
    }

    .logo-wrapper {
      background: white;
      padding: 1rem;
      border-radius: 15px;
      display: inline-block;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      position: relative;
      z-index: 2;
      transition: transform 0.3s ease;
      width: 100px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-wrapper:hover {
      transform: scale(1.05);
    }

    .logo-icon {
      font-size: 48px;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
    }

    .product-info {
      padding: 1.5rem;
    }

    .product-rating {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      margin-bottom: 1rem;
    }

    .star {
      color: #ffd700;
      font-size: 16px;
    }

    .rating-text {
      margin-left: 0.5rem;
      color: #666;
      font-size: 14px;
    }

    .product-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #333;
      text-align: center;
    }

    .product-category {
      font-size: 0.85rem;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 1rem;
    }

    .product-features {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
      margin-bottom: 1rem;
    }

    .feature-badge {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 15px;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .product-bottom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      border-top: 1px solid #f0f0f0;
      background: #fafafa;
    }

    .product-price {
      font-size: 1.4rem;
      font-weight: 700;
      color: #667eea;
    }

    .product-button {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 0.85rem;
    }

    .product-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .availability {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
    }

    .availability.in-stock {
      background: rgba(46, 204, 113, 0.1);
      color: #27ae60;
      border: 1px solid rgba(46, 204, 113, 0.3);
    }

    .availability.limited {
      background: rgba(241, 196, 15, 0.1);
      color: #f39c12;
      border: 1px solid rgba(241, 196, 15, 0.3);
    }

    .availability.out-of-stock {
      background: rgba(231, 76, 60, 0.1);
      color: #e74c3c;
      border: 1px solid rgba(231, 76, 60, 0.3);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: white;
      margin: 5% auto;
      padding: 0;
      border-radius: 20px;
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .modal-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
      text-align: center;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-body {
      padding: 2rem;
    }

    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100vh;
      background: white;
      box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
      transition: right 0.3s ease;
      z-index: 1500;
      overflow-y: auto;
    }

    .cart-sidebar.open {
      right: 0;
    }

    .cart-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }

    .cart-items {
      padding: 1rem;
    }

    .cart-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .cart-item-price {
      color: #667eea;
      font-weight: 700;
    }

    .cart-total {
      padding: 1rem;
      border-top: 2px solid #eee;
      background: #f8f9fa;
    }

    .checkout-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      font-size: 1.1rem;
      margin-top: 1rem;
    }

    .profile-modal .modal-content {
      max-width: 500px;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #333;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
    }

    .payment-methods {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .payment-method {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      border: 2px solid #e1e5e9;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .payment-method:hover, .payment-method.selected {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.05);
    }

    .payment-method i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .loading {
      text-align: center;
      padding: 3rem;
      color: #666;
    }

    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .no-results {
      text-align: center;
      padding: 3rem;
      color: #666;
    }

    .no-results i {
      font-size: 4rem;
      margin-bottom: 1rem;
      color: #ddd;
    }

    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
      }

      .search-container {
        order: 1;
        margin: 0;
        width: 100%;
      }

      .filter-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
      }

      .stats {
        margin-left: 0;
        margin-top: 1rem;
      }

      .product-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .container {
        padding: 1rem;
      }

      .cart-sidebar {
        width: 100%;
        right: -100%;
      }

      .modal-content {
        width: 95%;
        margin: 10% auto;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <div class="site-logo">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="site-title">KYC Shop</div>
      </div>

      <div class="search-container">
        <input type="text" class="search-input" placeholder="Поиск аккаунтов..." id="searchInput">
        <i class="fas fa-search search-icon"></i>
      </div>

      <div class="header-icons">
        <div class="header-icon" title="Избранное" id="favoritesBtn">
          <i class="fas fa-heart"></i>
          <span class="badge" id="favoriteCount">0</span>
        </div>
        <div class="header-icon" title="Профиль" id="profileBtn">
          <i class="fas fa-user"></i>
        </div>
        <div class="header-icon" title="Корзина" id="cartBtn">
          <i class="fas fa-shopping-cart"></i>
          <span class="badge" id="cartCount">0</span>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="filter-bar">
      <div class="filter-controls">
        <div class="filter-group">
          <label for="categoryFilter">Категория:</label>
          <select id="categoryFilter" class="filter-select">
            <option value="all">Все категории</option>
            <option value="crypto">Криптоплатформы</option>
            <option value="payment">Платежные системы</option>
            <option value="social">Социальные сети</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="priceFilter">Цена:</label>
          <select id="priceFilter" class="filter-select">
            <option value="all">Любая цена</option>
            <option value="0-30">$0 - $30</option>
            <option value="30-50">$30 - $50</option>
            <option value="50-100">$50 - $100</option>
            <option value="100+">$100+</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="sortBy">Сортировка:</label>
          <select id="sortBy" class="sort-select">
            <option value="name">По названию</option>
            <option value="price-low">Цена: по возрастанию</option>
            <option value="price-high">Цена: по убыванию</option>
            <option value="rating">По рейтингу</option>
          </select>
        </div>

        <div class="stats">
          <i class="fas fa-chart-bar"></i>
          <span id="resultsCount">Показано: 0 из 0</span>
        </div>
      </div>
    </div>

    <div id="productGrid" class="product-grid">
      <div class="loading">
        <div class="spinner"></div>
        <p>Загрузка товаров...</p>
      </div>
    </div>
  </div>

  <!-- Модальное окно товара -->
  <div id="productModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal('productModal')">&times;</button>
        <div id="modalProductInfo"></div>
      </div>
      <div class="modal-body" id="modalProductDetails"></div>
    </div>
  </div>

  <!-- Модальное окно профиля -->
  <div id="profileModal" class="modal profile-modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal('profileModal')">&times;</button>
        <h2>Личный кабинет</h2>
      </div>
      <div class="modal-body">
        <div id="profileForm">
          <div class="form-group">
            <label for="profileName">Имя:</label>
            <input type="text" id="profileName" placeholder="Введите ваше имя">
          </div>
          <div class="form-group">
            <label for="profileEmail">Email:</label>
            <input type="email" id="profileEmail" placeholder="Введите ваш email">
          </div>
          <div class="form-group">
            <label for="profilePhone">Телефон:</label>
            <input type="tel" id="profilePhone" placeholder="Введите ваш телефон">
          </div>
          <button class="btn-primary" onclick="saveProfile()">Сохранить профиль</button>
        </div>
        <div id="profileInfo" style="display: none;">
          <h3>Информация профиля</h3>
          <div id="profileDetails"></div>
          <button class="btn-primary" onclick="editProfile()">Редактировать</button>
          <button class="btn-primary" onclick="logoutProfile()" style="background: #e74c3c; margin-top: 1rem;">Выйти</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Модальное окно избранного -->
  <div id="favoritesModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal('favoritesModal')">&times;</button>
        <h2>Избранные товары</h2>
      </div>
      <div class="modal-body">
        <div id="favoritesList"></div>
      </div>
    </div>
  </div>

  <!-- Модальное окно оплаты -->
  <div id="paymentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal('paymentModal')">&times;</button>
        <h2>Оплата заказа</h2>
      </div>
      <div class="modal-body">
        <div id="paymentContent">
          <h3>Выберите способ оплаты:</h3>
          <div class="payment-methods">
            <div class="payment-method" data-method="bitcoin">
              <i class="fab fa-bitcoin" style="color: #f7931a;"></i>
              <span>Bitcoin</span>
            </div>
            <div class="payment-method" data-method="ethereum">
              <i class="fab fa-ethereum" style="color: #627eea;"></i>
              <span>Ethereum</span>
            </div>
            <div class="payment-method" data-method="usdt">
              <i class="fas fa-dollar-sign" style="color: #26a17b;"></i>
              <span>USDT</span>
            </div>
            <div class="payment-method" data-method="litecoin">
              <i class="fab fa-bitcoin" style="color: #bfbbbb;"></i>
              <span>Litecoin</span>
            </div>
          </div>
          <div id="paymentDetails" style="display: none;">
            <h4>Детали оплаты:</h4>
            <div id="cryptoAddress"></div>
            <div id="paymentAmount"></div>
            <button class="btn-primary" onclick="confirmPayment()">Подтвердить оплату</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Боковая панель корзины -->
  <div id="cartSidebar" class="cart-sidebar">
    <div class="cart-header">
      <h3>Корзина</h3>
      <button class="cart-close" onclick="toggleCart()">&times;</button>
    </div>
    <div id="cartItems" class="cart-items"></div>
    <div class="cart-total">
      <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 700;">
        <span>Итого:</span>
        <span id="cartTotal">$0.00</span>
      </div>
      <button class="checkout-btn" onclick="openPaymentModal()">Оформить заказ</button>
    </div>
  </div>

  <script>
    // Данные продуктов с кастомными иконками
    const products = [
      // Криптоплатформы
      {
        id: '1',
        name: 'Binance Верифицированный Аккаунт',
        category: 'crypto',
        price: 45.00,
        rating: 5,
        reviews: 128,
        iconClass: 'fas fa-coins',
        iconColor: '#f3ba2f',
        bgColor: '#1e2329',
        features: ['KYC 2', 'Email доступ', 'API ключи'],
        availability: 'in-stock',
        availabilityText: 'В наличии',description: 'Полностью верифицированный аккаунт Binance с уровнем KYC 2'
      },
      {
        id: '2',
        name: 'Coinbase Pro Аккаунт',
        category: 'crypto',
        price: 52.99,
        rating: 4.8,
        reviews: 95,
        iconClass: 'fab fa-bitcoin',
        iconColor: '#0052ff',
        bgColor: '#ffffff',
        features: ['KYC Level 3', '2FA включен', 'Банковская карта'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Профессиональный аккаунт Coinbase с полной верификацией'
      },
      {
        id: '3',
        name: 'Bybit Премиум Аккаунт',
        category: 'crypto',
        price: 38.50,
        rating: 4.7,
        reviews: 156,
        iconClass: 'fas fa-chart-line',
        iconColor: '#f7931a',
        bgColor: '#1a1a1a',
        features: ['VIP Level 1', 'API торговля', 'Фьючерсы'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Премиум аккаунт Bybit для продвинутой торговли'
      },
      {
        id: '4',
        name: 'Kraken Верифицированный',
        category: 'crypto',
        price: 49.99,
        rating: 4.6,
        reviews: 89,
        iconClass: 'fas fa-wave-square',
        iconColor: '#5741d9',
        bgColor: '#ffffff',
        features: ['Tier 3 верификация', 'Фиатные пары', 'Стейкинг'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Полностью верифицированный аккаунт Kraken с максимальными лимитами'
      },
      {
        id: '5',
        name: 'OKX Pro Trading',
        category: 'crypto',
        price: 41.00,
        rating: 4.5,
        reviews: 112,
        iconClass: 'fas fa-exchange-alt',
        iconColor: '#000000',
        bgColor: '#ffffff',
        features: ['VIP статус', 'Маржинальная торговля', 'DeFi'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Профессиональный аккаунт OKX с VIP статусом'
      },
      {
        id: '6',
        name: 'Huobi Global VIP',
        category: 'crypto',
        price: 44.99,
        rating: 4.4,
        reviews: 78,
        iconClass: 'fas fa-fire',
        iconColor: '#2ebd85',
        bgColor: '#1a1a1a',
        features: ['VIP 2 уровень', 'P2P торговля', 'Earning'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'VIP аккаунт Huobi Global с привилегиями'
      },
      {
        id: '7',
        name: 'KuCoin Trading Pro',
        category: 'crypto',
        price: 36.99,
        rating: 4.3,
        reviews: 134,
        iconClass: 'fas fa-cube',
        iconColor: '#24ae8f',
        bgColor: '#ffffff',
        features: ['VIP Level 1', 'Фьючерсы', 'Pool-X'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Продвинутый аккаунт KuCoin для торговли'
      },
      {
        id: '8',
        name: 'Gate.io Premium',
        category: 'crypto',
        price: 33.50,
        rating: 4.2,
        reviews: 67,
        iconClass: 'fas fa-door-open',
        iconColor: '#6c5ce7',
        bgColor: '#ffffff',
        features: ['VIP статус', 'Копи-торговля', 'Стартапы'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Премиум аккаунт Gate.io с эксклюзивными возможностями'
      },
      {
        id: '9',
        name: 'Bitget Copy Trading',
        category: 'crypto',
        price: 39.99,
        rating: 4.1,
        reviews: 91,
        iconClass: 'fas fa-copy',
        iconColor: '#00d4aa',
        bgColor: '#1a1a1a',
        features: ['Copy Trading', 'Фьючерсы', 'Launchpad'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Специализированный аккаунт Bitget для копи-торговли'
      },
      {
        id: '10',
        name: 'Mexc Exchange Pro',
        category: 'crypto',
        price: 31.99,
        rating: 4.0,
        reviews: 103,
        iconClass: 'fas fa-mountain',
        iconColor: '#00c9a7',
        bgColor: '#ffffff',
        features: ['VIP уровень', 'Margin торговля', 'Kickstarter'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Профессиональный аккаунт MEXC с расширенными функциями'
      },
      // Платежные системы
      {
        id: '11',
        name: 'Revolut Business',
        category: 'payment',
        price: 79.99,
        rating: 4.9,
        reviews: 245,
        iconClass: 'fas fa-credit-card',
        iconColor: '#0075eb',
        bgColor: '#ffffff',
        features: ['Business аккаунт', 'Мультивалюта', 'API интеграция'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Бизнес аккаунт Revolut с полным доступом'
      },
      {
        id: '12',
        name: 'Wise Multi-Currency',
        category: 'payment',
        price: 89.50,
        rating: 4.8,
        reviews: 189,
        iconClass: 'fas fa-globe',
        iconColor: '#37517e',
        bgColor: '#ffffff',
        features: ['40+ валют', 'IBAN счета', 'Дебетовая карта'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Мультивалютный аккаунт Wise для международных переводов'
      },
      {
        id: '13',
        name: 'Stripe Business Account',
        category: 'payment',
        price: 149.99,
        rating: 4.7,
        reviews: 167,
        iconClass: 'fas fa-stripe-s',
        iconColor: '#635bff',
        bgColor: '#ffffff',
        features: ['Express Dashboard', 'Connect платформа', 'Radar защита'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Готовый к работе Stripe аккаунт для онлайн-бизнеса'
      },
      {
        id: '14',
        name: 'PayPal Business Verified',
        category: 'payment',
        price: 129.99,
        rating: 4.6,
        reviews: 298,
        iconClass: 'fab fa-paypal',
        iconColor: '#00457c',
        bgColor: '#ffffff',
        features: ['Business верификация', 'API доступ', 'Chargeback защита'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Верифицированный PayPal Business для коммерции'
      },
      {
        id: '15',
        name: 'Advcash Premium',
        category: 'payment',
        price: 67.99,
        rating: 4.4,
        reviews: 134,
        iconClass: 'fas fa-wallet',
        iconColor: '#1976d2',
        bgColor: '#ffffff',
        features: ['Gold статус', 'Пластиковая карта', 'Криптообмен'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Премиум аккаунт AdvCash с максимальными лимитами'
      },
      {
        id: '16',
        name: 'Perfect Money Verified',
        category: 'payment',
        price: 45.99,
        rating: 4.2,
        reviews: 156,
        iconClass: 'fas fa-dollar-sign',
        iconColor: '#ffd700',
        bgColor: '#1a1a1a',
        features: ['Полная верификация', 'API торговля', 'Обменник'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Верифицированный Perfect Money с полным доступом'
      },
      {
        id: '17',
        name: 'Skrill VIP Account',
        category: 'payment',
        price: 99.99,
        rating: 4.5,
        reviews: 178,
        iconClass: 'fas fa-money-check-alt',
        iconColor: '#862165',
        bgColor: '#ffffff',
        features: ['VIP статус', 'Prepaid Mastercard', 'Криптоуслуги'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'VIP аккаунт Skrill с эксклюзивными привилегиями'
      },
      {
        id: '18',
        name: 'Neteller Premium Plus',
        category: 'payment',
        price: 85.50,
        rating: 4.3,
        reviews: 123,
        iconClass: 'fas fa-university',
        iconColor: '#00ac13',
        bgColor: '#ffffff',
        features: ['Premium Plus', 'Net+ карта', 'Криптообмен'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Премиум аккаунт NETELLER с расширенными возможностями'
      },
      {
        id: '19',
        name: 'Payeer Business',
        category: 'payment',
        price: 55.99,
        rating: 4.1,
        reviews: 145,
        iconClass: 'fas fa-handshake',
        iconColor: '#ff6b35',
        bgColor: '#ffffff',
        features: ['Business статус', 'Mass Pay', 'Обменник'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Бизнес аккаунт Payeer для массовых выплат'
      },
      {
        id: '20',
        name: 'Payoneer Master Account',
        category: 'payment',
        price: 119.99,
        rating: 4.7,
        reviews: 201,
        iconClass: 'fas fa-credit-card',
        iconColor: '#ff4800',
        bgColor: '#ffffff',
        features: ['Prepaid Mastercard', 'Global банк', 'Tax форма'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Мастер аккаунт Payoneer для глобальных платежей'
      },
      // Социальные сети
      {
        id: '21',
        name: 'Facebook Business Manager',
        category: 'social',
        price: 89.99,
        rating: 4.8,
        reviews: 312,
        iconClass: 'fab fa-facebook-f',
        iconColor: '#1877f2',
        bgColor: '#ffffff',
        features: ['Business Manager', 'Ads аккаунт', 'Pixel настроен'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Настроенный Facebook Business Manager для рекламы'
      },
      {
        id: '22',
        name: 'Instagram Business Pro',
        category: 'social',
        price: 65.99,
        rating: 4.6,
        reviews: 267,
        iconClass: 'fab fa-instagram',
        iconColor: '#e4405f',
        bgColor: '#ffffff',
        features: ['Business профиль', '10K подписчиков', 'Verified badge'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Бизнес профиль Instagram с аудиторией и верификацией'
      },
      {
        id: '23',
        name: 'TikTok Creator Fund',
        category: 'social',
        price: 79.99,
        rating: 4.5,
        reviews: 189,
        iconClass: 'fab fa-tiktok',
        iconColor: '#000000',
        bgColor: '#ff0050',
        features: ['Creator Fund', '50K подписчиков', 'Monetization'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'TikTok аккаунт с доступом к Creator Fund'
      },
      {
        id: '24',
        name: 'YouTube Partner Program',
        category: 'social',
        price: 199.99,
        rating: 4.9,
        reviews: 156,
        iconClass: 'fab fa-youtube',
        iconColor: '#ff0000',
        bgColor: '#ffffff',
        features: ['Partner Program', '1000+ подписчиков', '4000+ часов'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'YouTube канал с партнерской программой для монетизации'
      },
      {
        id: '25',
        name: 'Twitter Blue Verified',
        category: 'social',
        price: 299.99,
        rating: 4.7,
        reviews: 98,
        iconClass: 'fab fa-twitter',
        iconColor: '#1da1f2',
        bgColor: '#ffffff',
        features: ['Blue подписка', 'Verified badge', '25K подписчиков'],
        availability: 'out-of-stock',
        availabilityText: 'Нет в наличии',
        description: 'Верифицированный Twitter аккаунт с Blue подпиской'
      },
      {
        id: '26',
        name: 'LinkedIn Premium Business',
        category: 'social',
        price: 149.99,
        rating: 4.4,
        reviews: 134,
        iconClass: 'fab fa-linkedin-in',
        iconColor: '#0077b5',
        bgColor: '#ffffff',
        features: ['Premium Business', '5000+ связей', 'Sales Navigator'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Premium LinkedIn аккаунт для B2B продаж'
      },
      {
        id: '27',
        name: 'Telegram Premium Channel',
        category: 'social',
        price: 45.99,
        rating: 4.2,
        reviews: 167,
        iconClass: 'fab fa-telegram-plane',
        iconColor: '#0088cc',
        bgColor: '#ffffff',
        features: ['Premium подписка', '10K подписчиков', 'Monetization'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Telegram канал с Premium подпиской и аудиторией'
      },
      {
        id: '28',
        name: 'Discord Nitro Server',
        category: 'social',
        price: 39.99,
        rating: 4.1,
        reviews: 89,
        iconClass: 'fab fa-discord',
        iconColor: '#5865f2',
        bgColor: '#ffffff',
        features: ['Nitro подписка', '1000+ участников', 'Custom URL'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Discord сервер с Nitro и активным сообществом'
      },
      {
        id: '29',
        name: 'Reddit Premium Account',
        category: 'social',
        price: 29.99,
        rating: 3.9,
        reviews: 76,
        iconClass: 'fab fa-reddit-alien',
        iconColor: '#ff4500',
        bgColor: '#ffffff',
        features: ['Premium подписка', 'High karma', 'Aged account'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Старый Reddit аккаунт с Premium и высокой кармой'
      },
      {
        id: '30',
        name: 'Twitch Affiliate Program',
        category: 'social',
        price: 159.99,
        rating: 4.6,
        reviews: 112,
        iconClass: 'fab fa-twitch',
        iconColor: '#9146ff',
        bgColor: '#ffffff',
        features: ['Affiliate статус', '500+ подписчиков', 'Donations setup'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Twitch канал с Affiliate программой для стримеров'
      },
      // Дополнительные продукты
      {
        id: '31',
        name: 'WhatsApp Business API',
        category: 'social',
        price: 199.99,
        rating: 4.8,
        reviews: 145,
        iconClass: 'fab fa-whatsapp',
        iconColor: '#25d366',
        bgColor: '#ffffff',
        features: ['Business API', 'Verified профиль', 'Green badge'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'WhatsApp Business API для корпоративных клиентов'
      },
      {
        id: '32',
        name: 'Shopify Partners Account',
        category: 'payment',
        price: 299.99,
        rating: 4.7,
        reviews: 98,
        iconClass: 'fas fa-shopping-bag',
        iconColor: '#96bf48',
        bgColor: '#ffffff',
        features: ['Partners статус', 'Development store', 'Commission'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Shopify Partners аккаунт для разработчиков'
      },
      {
        id: '33',
        name: 'Amazon Seller Central',
        category: 'payment',
        price: 449.99,
        rating: 4.9,
        reviews: 167,
        iconClass: 'fab fa-amazon',
        iconColor: '#ff9900',
        bgColor: '#232f3e',
        features: ['Professional план', 'Brand Registry', 'FBA готов'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Amazon Seller Central с профессиональным планом'
      },
      {
        id: '34',
        name: 'eBay PowerSeller Account',
        category: 'payment',
        price: 189.99,
        rating: 4.5,
        reviews: 134,
        iconClass: 'fab fa-ebay',
        iconColor: '#0064d2',
        bgColor: '#ffffff',
        features: ['PowerSeller статус', 'Top Rated', '10000+ отзывов'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'eBay PowerSeller аккаунт с отличной репутацией'
      },
      {
        id: '35',
        name: 'Etsy Premium Shop',
        category: 'payment',
        price: 99.99,
        rating: 4.3,
        reviews: 89,
        iconClass: 'fab fa-etsy',
        iconColor: '#f56400',
        bgColor: '#ffffff',
        features: ['Premium listing', '5-star rating', '1000+ продаж'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Премиум магазин Etsy с высоким рейтингом'
      },
      {
        id: '36',
        name: 'Google Ads Threshold Account',
        category: 'social',
        price: 159.99,
        rating: 4.6,
        reviews: 123,
        iconClass: 'fab fa-google',
        iconColor: '#4285f4',
        bgColor: '#ffffff',
        features: ['$350 threshold', 'Verified', 'Spending history'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Google Ads аккаунт с высоким порогом оплаты'
      },
      {
        id: '37',
        name: 'Microsoft Ads Professional',
        category: 'social',
        price: 89.99,
        rating: 4.2,
        reviews: 67,
        iconClass: 'fab fa-microsoft',
        iconColor: '#00a1f1',
        bgColor: '#ffffff',
        features: ['Professional план', 'API доступ', 'Spending cap'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Microsoft Ads аккаунт для профессиональной рекламы'
      },
      {
        id: '38',
        name: 'Apple Developer Program',
        category: 'payment',
        price: 249.99,
        rating: 4.8,
        reviews: 156,
        iconClass: 'fab fa-apple',
        iconColor: '#000000',
        bgColor: '#ffffff',
        features: ['Developer лицензия', 'App Store Connect', 'TestFlight'],
        availability: 'limited',
        availabilityText: 'Ограничено',
        description: 'Apple Developer Program для публикации приложений'
      },
      {
        id: '39',
        name: 'Google Play Console',
        category: 'payment',
        price: 149.99,
        rating: 4.4,
        reviews: 134,
        iconClass: 'fab fa-google-play',
        iconColor: '#01875f',
        bgColor: '#ffffff',
        features: ['Developer аккаунт', 'Play Console', 'In-app billing'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Google Play Console для разработчиков Android'
      },
      {
        id: '40',
        name: 'Spotify Artist Profile',
        category: 'social',
        price: 79.99,
        rating: 4.1,
        reviews: 89,
        iconClass: 'fab fa-spotify',
        iconColor: '#1db954',
        bgColor: '#000000',
        features: ['Artist профиль', 'Verified badge', '10K слушателей'],
        availability: 'in-stock',
        availabilityText: 'В наличии',
        description: 'Spotify Artist профиль с верификацией и аудиторией'
      }
    ];

    // Состояние приложения
    let state = {
      products: products,
      filteredProducts: products,
      cart: JSON.parse(localStorage.getItem('cart')) || [],
      favorites: JSON.parse(localStorage.getItem('favorites')) || [],
      profile: JSON.parse(localStorage.getItem('profile')) || null,
      currentFilters: {
        search: '',
        category: 'all',
        price: 'all',
        sort: 'name'
      }
    };

    // Инициализация приложения
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
      loadProfile();
      updateUI();
    });

    function initializeApp() {
      // Обработчики событий
      document.getElementById('searchInput').addEventListener('input', handleSearch);
      document.getElementById('categoryFilter').addEventListener('change', handleFilters);
      document.getElementById('priceFilter').addEventListener('change', handleFilters);
      document.getElementById('sortBy').addEventListener('change', handleFilters);

      document.getElementById('cartBtn').addEventListener('click', toggleCart);
      document.getElementById('profileBtn').addEventListener('click', () => openModal('profileModal'));
      document.getElementById('favoritesBtn').addEventListener('click', showFavorites);

      // Обработчики способов оплаты
      document.querySelectorAll('.payment-method').forEach(method => {
        method.addEventListener('click', selectPaymentMethod);
      });

      // Закрытие модальных окон при клике вне них
      document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
          if (e.target === this) {
            closeModal(this.id);
          }
        });
      });

      // Первоначальная загрузка продуктов
      setTimeout(() => {
        renderProducts();
      }, 1000);
    }

    function handleSearch(e) {
      state.currentFilters.search = e.target.value.toLowerCase();
      applyFilters();
    }

    function handleFilters() {
      state.currentFilters.category = document.getElementById('categoryFilter').value;
      state.currentFilters.price = document.getElementById('priceFilter').value;
      state.currentFilters.sort = document.getElementById('sortBy').value;
      applyFilters();
    }

    function applyFilters() {
      let filtered = [...state.products];

      // Поиск
      if (state.currentFilters.search) {
        filtered = filtered.filter(product => 
          product.name.toLowerCase().includes(state.currentFilters.search) ||
          product.description.toLowerCase().includes(state.currentFilters.search)
        );
      }

      // Категория
      if (state.currentFilters.category !== 'all') {
        filtered = filtered.filter(product => product.category === state.currentFilters.category);
      }

      // Цена
      if (state.currentFilters.price !== 'all') {
        const [min, max] = state.currentFilters.price.split('-').map(p => p.replace('+', ''));
        filtered = filtered.filter(product => {
          if (max) {
            return product.price >= parseInt(min) && product.price <= parseInt(max);
          } else {
            return product.price >= parseInt(min);
          }
        });
      }

      // Сортировка
      filtered.sort((a, b) => {
        switch (state.currentFilters.sort) {
          case 'price-low':
            return a.price - b.price;
          case 'price-high':
            return b.price - a.price;
          case 'rating':
            return b.rating - a.rating;
          case 'name':
          default:
            return a.name.localeCompare(b.name);
        }
      });

      state.filteredProducts = filtered;
      renderProducts();
    }

    function renderProducts() {
      const grid = document.getElementById('productGrid');
      const resultsCount = document.getElementById('resultsCount');

      resultsCount.textContent = `Показано: ${state.filteredProducts.length} из ${state.products.length}`;

      if (state.filteredProducts.length === 0) {
        grid.innerHTML = `
          <div class="no-results">
            <i class="fas fa-search"></i>
            <h3>Товары не найдены</h3>
            <p>Попробуйте изменить параметры поиска</p>
          </div>
        `;
        return;
      }

      grid.innerHTML = state.filteredProducts.map(product => `
        <div class="product-card" data-id="${product.id}">
          <button class="favorite-btn ${isFavorite(product.id) ? 'active' : ''}" onclick="toggleFavorite('${product.id}')">
            <i class="fas fa-heart"></i>
          </button>

          <div class="availability ${product.availability}">
            ${product.availabilityText}
          </div>

          <div class="product-top" onclick="showProductDetails('${product.id}')">
            <div class="logo-wrapper">
              <div class="logo-icon" style="background: ${product.bgColor}; color: ${product.iconColor};">
                <i class="${product.iconClass}"></i>
              </div>
            </div>
          </div>

          <div class="product-info">
            <div class="product-rating">
              ${generateStars(product.rating)}
              <span class="rating-text">(${product.reviews} отзывов)</span>
            </div>

            <h3 class="product-title">${product.name}</h3>
            <p class="product-category">${getCategoryName(product.category)}</p>

            <div class="product-features">
              ${product.features.map(feature => `<span class="feature-badge">${feature}</span>`).join('')}
            </div>
          </div>

          <div class="product-bottom">
            <div class="product-price">$${product.price.toFixed(2)}</div>
            <button class="product-button" onclick="addToCart('${product.id}')" 
                    ${product.availability === 'out-of-stock' ? 'disabled' : ''}>
              ${product.availability === 'out-of-stock' ? 'Нет в наличии' : 'Купить'}
            </button>
          </div>
        </div>
      `).join('');
    }

    function generateStars(rating) {
      const fullStars = Math.floor(rating);
      const hasHalfStar = rating % 1 !== 0;
      letstars = '';

      for (let i = 0; i < fullStars; i++) {
        stars += '<i class="fas fa-star star"></i>';
      }

      if (hasHalfStar) {
        stars += '<i class="fas fa-star-half-alt star"></i>';
      }

      const emptyStars = 5 - Math.ceil(rating);
      for (let i = 0; i < emptyStars; i++) {
        stars += '<i class="far fa-star star"></i>';
      }

      return stars;
    }

    function getCategoryName(category) {
      const categories = {
        'crypto': 'Криптоплатформы',
        'payment': 'Платежные системы',
        'social': 'Социальные сети'
      };
      return categories[category] || category;
    }

    function showProductDetails(productId) {
      const product = state.products.find(p => p.id === productId);
      if (!product) return;

      const modalInfo = document.getElementById('modalProductInfo');
      const modalDetails = document.getElementById('modalProductDetails');

      modalInfo.innerHTML = `
        <div class="logo-wrapper" style="margin-bottom: 1rem;">
          <div class="logo-icon" style="background: ${product.bgColor}; color: ${product.iconColor};">
            <i class="${product.iconClass}"></i>
          </div>
        </div>
        <h2>${product.name}</h2>
        <div class="product-rating">
          ${generateStars(product.rating)}
          <span class="rating-text">(${product.reviews} отзывов)</span>
        </div>
      `;

      modalDetails.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div>
            <h3>Описание</h3>
            <p>${product.description}</p>

            <h3 style="margin-top: 1.5rem;">Особенности</h3>
            <ul style="margin-left: 1rem;">
              ${product.features.map(feature => `<li>${feature}</li>`).join('')}
            </ul>
          </div>

          <div>
            <h3>Информация о товаре</h3>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Категория:</span>
                <strong>${getCategoryName(product.category)}</strong>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Рейтинг:</span>
                <strong>${product.rating}/5</strong>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Отзывы:</span>
                <strong>${product.reviews}</strong>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                <span>Наличие:</span>
                <strong class="${product.availability}">${product.availabilityText}</strong>
              </div>

              <div style="text-align: center; padding-top: 1rem; border-top: 1px solid #dee2e6;">
                <div style="font-size: 2rem; font-weight: 700; color: #667eea; margin-bottom: 1rem;">
                  $${product.price.toFixed(2)}
                </div>
                <button class="btn-primary" onclick="addToCart('${product.id}'); closeModal('productModal');" 
                        ${product.availability === 'out-of-stock' ? 'disabled' : ''}>
                  ${product.availability === 'out-of-stock' ? 'Нет в наличии' : 'Добавить в корзину'}
                </button>
              </div>
            </div>
          </div>
        </div>
      `;

      openModal('productModal');
    }

    function addToCart(productId) {
      const product = state.products.find(p => p.id === productId);
      if (!product || product.availability === 'out-of-stock') return;

      const existingItem = state.cart.find(item => item.id === productId);
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        state.cart.push({ ...product, quantity: 1 });
      }

      saveCart();
      updateUI();
      showNotification('Товар добавлен в корзину!', 'success');
    }

    function removeFromCart(productId) {
      state.cart = state.cart.filter(item => item.id !== productId);
      saveCart();
      updateUI();
      renderCart();
    }

    function updateCartQuantity(productId, quantity) {
      const item = state.cart.find(item => item.id === productId);
      if (item) {
        if (quantity <= 0) {
          removeFromCart(productId);
        } else {
          item.quantity = quantity;
          saveCart();
          updateUI();  
          renderCart();
        }
      }
    }

    function toggleFavorite(productId) {
      const index = state.favorites.indexOf(productId);
      if (index > -1) {
        state.favorites.splice(index, 1);
      } else {
        state.favorites.push(productId);
      }

      saveFavorites();
      updateUI();
      renderProducts();
    }

    function isFavorite(productId) {
      return state.favorites.includes(productId);
    }

    function showFavorites() {
      const favoriteProducts = state.products.filter(p => isFavorite(p.id));
      const favoritesList = document.getElementById('favoritesList');

      if (favoriteProducts.length === 0) {
        favoritesList.innerHTML = `
          <div class="no-results">
            <i class="fas fa-heart"></i>
            <h3>Нет избранных товаров</h3>
            <p>Добавьте товары в избранное, чтобы они появились здесь</p>
          </div>
        `;
      } else {
        favoritesList.innerHTML = favoriteProducts.map(product => `
          <div class="cart-item">
            <div class="logo-wrapper" style="width: 60px; height: 60px; margin: 0;">
              <div class="logo-icon" style="background: ${product.bgColor}; color: ${product.iconColor}; width: 50px; height: 50px;">
                <i class="${product.iconClass}" style="font-size: 24px;"></i>
              </div>
            </div>
            <div class="cart-item-info">
              <div class="cart-item-title">${product.name}</div>
              <div class="cart-item-price">$${product.price.toFixed(2)}</div>
            </div>
            <button onclick="toggleFavorite('${product.id}'); showFavorites();" style="background: #e74c3c; color: white; border: none; padding: 0.5rem; border-radius: 5px; cursor: pointer;">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        `).join('');
      }

      openModal('favoritesModal');
    }

    function toggleCart() {
      const cartSidebar = document.getElementById('cartSidebar');
      cartSidebar.classList.toggle('open');
      if (cartSidebar.classList.contains('open')) {
        renderCart();
      }
    }

    function renderCart() {
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');

      if (state.cart.length === 0) {
        cartItems.innerHTML = `
          <div class="no-results">
            <i class="fas fa-shopping-cart"></i>
            <h3>Корзина пуста</h3>
            <p>Добавьте товары для оформления заказа</p>
          </div>
        `;
        cartTotal.textContent = '$0.00';
        return;
      }

      const total = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      cartTotal.textContent = `$${total.toFixed(2)}`;

      cartItems.innerHTML = state.cart.map(item => `
        <div class="cart-item">
          <div class="logo-wrapper" style="width: 60px; height: 60px; margin: 0;">
            <div class="logo-icon" style="background: ${item.bgColor}; color: ${item.iconColor}; width: 50px; height: 50px;">
              <i class="${item.iconClass}" style="font-size: 24px;"></i>
            </div>
          </div>
          <div class="cart-item-info">
            <div class="cart-item-title">${item.name}</div>
            <div class="cart-item-price">$${item.price.toFixed(2)} x ${item.quantity}</div>
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
              <button onclick="updateCartQuantity('${item.id}', ${item.quantity - 1})" style="background: #6c757d; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">-</button>
              <span style="font-weight: 600;">${item.quantity}</span>
              <button onclick="updateCartQuantity('${item.id}', ${item.quantity + 1})" style="background: #28a745; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">+</button>
              <button onclick="removeFromCart('${item.id}')" style="background: #dc3545; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 5px; cursor: pointer; margin-left: auto;">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function openPaymentModal() {
      if (state.cart.length === 0) {
        showNotification('Корзина пуста!', 'error');
        return;
      }

      closeModal('cartSidebar');
      document.getElementById('cartSidebar').classList.remove('open');
      openModal('paymentModal');
    }

    function selectPaymentMethod(e) {
      const method = e.currentTarget;
      const methodType = method.dataset.method;

      document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
      method.classList.add('selected');

      const paymentDetails = document.getElementById('paymentDetails');
      const cryptoAddress = document.getElementById('cryptoAddress');
      const paymentAmount = document.getElementById('paymentAmount');

      const total = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

      const addresses = {
        bitcoin: '1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa',
        ethereum: '0x742d35Cc6336C67b3B6C8f1b8C1f0F8d5aB6C0B8',
        usdt: 'TQn9Y2khEsLJW1ChVWFMSMeRDow5KGJPLQ',
        litecoin: 'LhK2hgT4JMGLo9P6Q7UKMNPRFjgq8rDxJ9'
      };

      const methodNames = {
        bitcoin: 'Bitcoin (BTC)',
        ethereum: 'Ethereum (ETH)', 
        usdt: 'Tether (USDT)',
        litecoin: 'Litecoin (LTC)'
      };

      cryptoAddress.innerHTML = `
        <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
          <h5>Адрес для оплаты ${methodNames[methodType]}:</h5>
          <div style="background: white; padding: 1rem; border-radius: 5px; border: 2px dashed #dee2e6; font-family: monospace; word-break: break-all; margin: 0.5rem 0;">
            ${addresses[methodType]}
          </div>
          <small style="color: #666;">Скопируйте адрес и отправьте точную сумму</small>
        </div>
      `;

      paymentAmount.innerHTML = `
        <div style="text-align: center; margin: 1rem 0;">
          <div style="font-size: 1.5rem; font-weight: 700; color: #667eea;">
            Сумма к оплате: $${total.toFixed(2)}
          </div>
          <small style="color: #666;">После оплаты товары будут отправлены на ваш email</small>
        </div>
      `;

      paymentDetails.style.display = 'block';
    }

    function confirmPayment() {
      const selectedMethod = document.querySelector('.payment-method.selected');
      if (!selectedMethod) {
        showNotification('Выберите способ оплаты!', 'error');
        return;
      }

      // Симуляция обработки платежа
      showNotification('Ожидаем подтверждение платежа...', 'info');

      setTimeout(() => {
        // Очищаем корзину после "успешной" оплаты
        state.cart = [];
        saveCart();
        updateUI();

        closeModal('paymentModal');
        showNotification('Платеж подтвержден! Товары отправлены на ваш email.', 'success');
      }, 3000);
    }

    function loadProfile() {
      const savedProfile = localStorage.getItem('profile');
      if (savedProfile) {
        state.profile = JSON.parse(savedProfile);
        showProfileInfo();
      }
    }

    function saveProfile() {
      const name = document.getElementById('profileName').value;
      const email = document.getElementById('profileEmail').value;
      const phone = document.getElementById('profilePhone').value;

      if (!name || !email || !phone) {
        showNotification('Заполните все поля!', 'error');
        return;
      }

      state.profile = { name, email, phone };
      localStorage.setItem('profile', JSON.stringify(state.profile));
      showProfileInfo();
      showNotification('Профиль сохранен!', 'success');
    }

    function showProfileInfo() {
      const profileForm = document.getElementById('profileForm');
      const profileInfo = document.getElementById('profileInfo');
      const profileDetails = document.getElementById('profileDetails');

      profileForm.style.display = 'none';
      profileInfo.style.display = 'block';

      profileDetails.innerHTML = `
        <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px;">
          <div style="margin-bottom: 0.5rem;"><strong>Имя:</strong> ${state.profile.name}</div>
          <div style="margin-bottom: 0.5rem;"><strong>Email:</strong> ${state.profile.email}</div>
          <div style="margin-bottom: 0.5rem;"><strong>Телефон:</strong> ${state.profile.phone}</div>
        </div>
      `;
    }

    function editProfile() {
      const profileForm = document.getElementById('profileForm');
      const profileInfo = document.getElementById('profileInfo');

      document.getElementById('profileName').value = state.profile.name;
      document.getElementById('profileEmail').value = state.profile.email;
      document.getElementById('profilePhone').value = state.profile.phone;

      profileForm.style.display = 'block';
      profileInfo.style.display = 'none';
    }

    function logoutProfile() {
      state.profile = null;
      localStorage.removeItem('profile');

      const profileForm = document.getElementById('profileForm');
      const profileInfo = document.getElementById('profileInfo');

      profileForm.style.display = 'block';
      profileInfo.style.display = 'none';

      document.getElementById('profileName').value = '';
      document.getElementById('profileEmail').value = '';
      document.getElementById('profilePhone').value = '';

      showNotification('Вы вышли из аккаунта', 'info');
    }

    function openModal(modalId) {
      document.getElementById(modalId).style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function updateUI() {
      document.getElementById('cartCount').textContent = state.cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('favoriteCount').textContent = state.favorites.length;
    }

    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(state.cart));
    }

    function saveFavorites() {
      localStorage.setItem('favorites', JSON.stringify(state.favorites));
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        color: white;
        font-weight: 600;
        z-index: 9999;
        transform: translateX(100%);
        transition: transform 0.3s ease;
      `;

      const colors = {
        success: '#28a745',
        error: '#dc3545',
        info: '#17a2b8',
        warning: '#ffc107'
      };

      notification.style.background = colors[type] || colors.info;
      notification.textContent = message;

      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);

      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // Закрытие боковой панели корзины при клике вне её
    document.addEventListener('click', function(e) {
      const cartSidebar = document.getElementById('cartSidebar');
      const cartBtn = document.getElementById('cartBtn');

      if (cartSidebar.classList.contains('open') && 
          !cartSidebar.contains(e.target) && 
          !cartBtn.contains(e.target)) {
        cartSidebar.classList.remove('open');
      }
    });
  </script>
</body>
</html>
